---
  - name: Provision an EC2 Instance
    hosts: ansible-server
    connection: local
    gather_facts: False
    vars:
      keypair: mykeypair1
      instance_type: t2.medium
      image: ami-0f54a2f7d2e9c88b3
      region: us-west-2
    tasks:
    - name: Launch instance
      ec2:
         key_name: "{{ keypair }}"
         group_id: sg-033da3e1e23206c4f
         instance_type: "{{ instance_type }}"
         image: "{{ image }}"
         instance_tags:
            Name: Node1
         user_data: "{{ lookup('file','user_data.sh')}}"
         wait: true
         region: "{{ region }}"
         vpc_subnet_id: subnet-057f0b57e772b22a0
         assign_public_ip: yes
      register: ec2
    
  
